<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>새김 - 마크다운 에디터</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/editor.css">
    <link rel="stylesheet" href="css/preview.css">
    <link rel="stylesheet" href="css/dialogs.css">
    <link rel="stylesheet" href="css/theme-light.css" id="theme-stylesheet">

    <!-- QWebChannel for Python communication -->
    <script src="qrc:///qtwebchannel/qwebchannel.js"></script>

    <!-- Marked.js for markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.0/marked.min.js"></script>

    <!-- DOMPurify for HTML sanitization (XSS prevention) -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>

    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/github-dark.min.css">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <!-- Common languages -->
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/java.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/cpp.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/css.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/json.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/markdown.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/sql.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/bash.min.js"></script>

    <!-- Mermaid.js for diagram rendering -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <!-- KaTeX for math equation rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- PDF Export Progress Modal -->
        <div id="pdf-progress-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>PDF 변환 중...</h3>
                </div>
                <div class="modal-body">
                    <div class="progress-info">
                        <span id="progress-text">준비 중...</span>
                        <span id="progress-percentage">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div id="progress-bar" class="progress-bar"></div>
                    </div>
                    <div class="progress-details">
                        <small id="progress-details">변환 작업을 시작하는 중...</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main container with split layout -->
        <div class="split-container">
            <!-- Editor pane -->
            <div class="pane editor-pane">
                <div class="pane-header">
                    <span class="pane-title">편집기</span>
                    <div class="pane-actions">
                        <button class="btn-icon btn-helper" id="btn-katex-helper" title="KaTeX 수식 도우미 (Ctrl+Shift+K)">
                            <span class="helper-icon">fx</span>
                        </button>
                        <button class="btn-icon" id="btn-font-decrease" title="글꼴 축소 (Ctrl/Cmd + -)">
                            A-
                        </button>
                        <button class="btn-icon" id="btn-font-increase" title="글꼴 확대 (Ctrl/Cmd + +)">
                            A+
                        </button>
                        <button class="btn-icon" id="btn-word-count" title="단어 수">
                            <span id="word-count">0 단어</span>
                        </button>
                    </div>
                </div>
                <div class="pane-content">
                    <textarea id="editor" placeholder="# 여기에 마크다운을 작성하세요...

## 환영합니다!

새김 마크다운 에디터에 오신 것을 환영합니다.

### 주요 기능
- 실시간 미리보기
- 코드 하이라이팅
- 다이어그램 렌더링 (Mermaid.js)
- 수식 렌더링 (KaTeX)
- PDF/DOCX 변환

시작하려면 이 텍스트를 지우고 작성을 시작하세요!"></textarea>
                </div>
            </div>

            <!-- Resizer -->
            <div class="resizer" id="resizer"></div>

            <!-- Preview pane -->
            <div class="pane preview-pane">
                <div class="pane-header">
                    <span class="pane-title">미리보기</span>
                    <div class="pane-actions">
                        <button class="btn-icon" id="btn-theme" title="라이트 모드">
                            ☀️
                        </button>
                        <button class="btn-icon" id="btn-sync-scroll" title="스크롤 동기화" data-active="true">
                            🔗
                        </button>
                    </div>
                </div>
                <div class="pane-content" id="preview">
                    <!-- Rendered markdown will appear here -->
                    <div class="preview-placeholder">
                        <p>마크다운 미리보기가 여기에 표시됩니다.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript modules -->
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/preview.js"></script>
    <script src="js/file.js"></script>
    <script src="js/toolbar.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/find-replace.js"></script>
    <script src="js/katex-helper.js"></script>
</body>
</html>
